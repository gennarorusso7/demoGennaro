{"swagger":"2.0","info":{"version":"1.2.0-SNAPSHOT","title":"PLAYHISTORY API"},"host":"dev-tvm.orange.fr/k8s/play-history-develop","basePath":"/","tags":[{"name":"positions","description":"Operations about playing position"}],"schemes":["https"],"paths":{"/{version}/auth/articles":{"get":{"tags":["positions"],"summary":"Get all article positions of a householdId","description":"Get all article positions of a householdId\nReturns a list with all VIDEO, PACKAGE, SEASON article positions on the given householdID (CULV header) except ADULT advisory articles.","operationId":"getArticlesPositionsUsingGET","produces":["application/json"],"parameters":[{"name":"detailed","in":"query","description":"if true return extra metadatas , default value is false","required":false,"type":"boolean","default":false,"allowEmptyValue":false,"x-example":false},{"name":"domains","in":"query","description":"Domains list: VOD, NPVR ...","required":true,"type":"array","items":{"type":"string","enum":["VOD","NPVR"]},"collectionFormat":"multi","default":"VOD","allowEmptyValue":false,"enum":["VOD","NPVR"]},{"name":"onlyActive","in":"query","description":"if true return only positions with valid rights (if false return all positions)","required":false,"type":"boolean","default":false,"allowEmptyValue":false,"x-example":false},{"name":"version","in":"path","description":"Version of the API","required":true,"type":"string","default":"v1"}],"responses":{"200":{"description":"OK","schema":{"type":"array","items":{"$ref":"#/definitions/ArticlePositionDTO"}}}},"security":[{"X_WASSUP_PULV":[]},{"X_WASSUP_CULV":[]}],"deprecated":false},"post":{"tags":["positions"],"summary":"Creates article position for a given article","description":"Creates article position for a given article\nFor each VIDEO (of the package or season), the given timecode is set (=playing position), if not provided the default value is 0.\nA creation request on an article position already existing for the given householdID (CULV) is authorized, existing data and new data are, in this case, merged.\nArticle position with ADULT advisory are not stored\nIn this v1 version, articles are VOD articles : single movie (VIDEO), season of series (SEASON) or movie package (PACKAGE).Only one article position will be stored for a given couple articleId,householdId(CULV). Article ID for a VIDEO is multiDefAssetID. See VOD inventory reference for articleID details","operationId":"createArticlePositionUsingPOST","consumes":["application/json"],"produces":["application/json"],"parameters":[{"in":"body","name":"position","description":"Position","required":true,"schema":{"$ref":"#/definitions/ArticleDTO"}},{"name":"version","in":"path","description":"Version of the API","required":true,"type":"string","default":"v1"}],"responses":{"201":{"description":"Created"}},"security":[{"X_WASSUP_PULV":[]},{"X_WASSUP_CULV":[]}],"deprecated":false}},"/{version}/auth/articles/{articleId}":{"get":{"tags":["positions"],"summary":"Get article position","description":"Get article position\nThis article position must have been previously created (otherwise 404). \nArticle position with ADULT advisory are never returned (otherwise 404)","operationId":"getArticlePositionUsingGET","produces":["application/json"],"parameters":[{"name":"articleId","in":"path","description":"Article Id","required":true,"type":"string","default":"BOBSUPERHXXW0000001"},{"name":"detailed","in":"query","description":"if true return extra metadatas , default value is false","required":false,"type":"boolean","default":false,"allowEmptyValue":false,"x-example":false},{"name":"domain","in":"query","description":"Domain","required":true,"type":"string","default":"VOD","allowEmptyValue":false,"enum":["VOD","NPVR"]},{"name":"version","in":"path","description":"Version of the API","required":true,"type":"string","default":"v1"}],"responses":{"200":{"description":"OK","schema":{"$ref":"#/definitions/ArticlePositionDTO"}},"404":{"description":"<p>code=60 (Resource not found) : If the article doesn't exist</p>","schema":{"$ref":"#/definitions/ErrorDTO"}}},"security":[{"X_WASSUP_PULV":[]},{"X_WASSUP_CULV":[]}],"deprecated":false},"put":{"tags":["positions"],"summary":"Update an article position","description":"Update an article position\nOnly article of type VIDEO must be used for this api (if package or season, you get a 404)","operationId":"updatePositionUsingPUT","consumes":["application/json"],"produces":["application/json"],"parameters":[{"name":"articleId","in":"path","description":"Article Id","required":false,"type":"string"},{"in":"body","name":"timecode","description":"timecode (ms)","required":true,"schema":{"$ref":"#/definitions/TimeCodeDTO"}},{"name":"version","in":"path","description":"Version of the API","required":true,"type":"string","default":"v1"}],"responses":{"204":{"description":"No Content"},"404":{"description":"<p>code=60 (Resource not found) : If the article doesn't exist</p>","schema":{"$ref":"#/definitions/ErrorDTO"}}},"security":[{"X_WASSUP_PULV":[]},{"X_WASSUP_CULV":[]}],"deprecated":false}}},"securityDefinitions":{"X_WASSUP_CULV":{"type":"apiKey","name":"X_WASSUP_CULV","in":"header"},"X_WASSUP_PULV":{"type":"apiKey","name":"X_WASSUP_PULV","in":"header"}},"definitions":{"ArticleDTO":{"type":"object","required":["domain","id","type"],"discriminator":"type","properties":{"domain":{"type":"string","description":"TV sub domain : VOD in this version! for the future : CATCHUP, NPVR ... ","enum":["VOD","NPVR"]},"id":{"type":"string","description":"article id used in the given domain for this content (assetId)"},"type":{"type":"string","description":"warning : each article type can have an associated detailed model used in this api","enum":["VIDEO","SEASON","PACKAGE","RECORD"]}},"title":"ArticleDTO"},"ArticlePositionDTO":{"type":"object","required":["domain","id","type"],"discriminator":"dtoType","properties":{"domain":{"type":"string","description":"TV sub domain : VOD in this version! for the future : CATCHUP, NPVR ... ","enum":["VOD","NPVR"]},"id":{"type":"string","description":"article id used in the given domain for this content (assetId for a video)"},"type":{"type":"string","description":"warning : each article type can have an associated detailed model used in this api","enum":["VIDEO","SEASON","PACKAGE","RECORD"]}},"title":"ArticlePositionDTO"},"ErrorDTO":{"type":"object","properties":{"code":{"type":"integer","format":"int32","description":"Numerical error code, as defined by OrangeAPI"},"description":{"type":"string","description":"Detailed description of the error"},"message":{"type":"string","description":"Message associated to the error code"},"param":{"type":"object","description":"Error parameters, if any"},"stackTrace":{"type":"string","description":"Stack trace, not available in production"}},"title":"ErrorDTO"},"PackDetailedPositionDTO":{"title":"PackDetailedPositionDTO","allOf":[{"$ref":"#/definitions/ArticlePositionDTO"},{"type":"object","required":["advisory","csa","domain","id","type","videos"],"properties":{"advisory":{"type":"string","description":"advisory about the nature of the content (can be completed by csa code)","enum":["ALLPUBLIC","CHARM"]},"csa":{"type":"integer","format":"int32","description":"french csa code associated to the minimum age recommended to watch the content : 1 (no age limit), 2 (10 years) , 3 (12 years), 4 (16 years), 5 (18 years)"},"definition":{"type":"string","description":"Definition","enum":["NOT_APPLICABLE","SD","HD","UHD"]},"domain":{"type":"string","description":"TV sub domain : VOD in this version! for the future : CATCHUP, NPVR ... ","enum":["VOD","NPVR"]},"id":{"type":"string","description":"article id used in the given domain for this content (assetId for a video)"},"playEndDate":{"type":"integer","format":"int64","description":"the user can play this content until this timestamp (number of milliseconds since January 1, 1970, 00:00:00 GMT)"},"playStartDate":{"type":"integer","format":"int64","description":"the user can play this content from this timestamp (number of milliseconds since January 1, 1970, 00:00:00 GMT)"},"type":{"type":"string","description":"warning : each article type can have an associated detailed model used in this api","enum":["VIDEO","SEASON","PACKAGE","RECORD"]},"videos":{"type":"array","description":"ordered list of videos in this pack","items":{"$ref":"#/definitions/VideoDetailedPositionDTO"}}},"title":"PackDetailedPositionDTO"}]},"PackPositionDTO":{"title":"PackPositionDTO","allOf":[{"$ref":"#/definitions/ArticlePositionDTO"},{"type":"object","required":["domain","id","type","videos"],"properties":{"domain":{"type":"string","description":"TV sub domain : VOD in this version! for the future : CATCHUP, NPVR ... ","enum":["VOD","NPVR"]},"id":{"type":"string","description":"article id used in the given domain for this content (assetId for a video)"},"type":{"type":"string","description":"warning : each article type can have an associated detailed model used in this api","enum":["VIDEO","SEASON","PACKAGE","RECORD"]},"videos":{"type":"array","description":"ordered list of videos in this pack","items":{"$ref":"#/definitions/VideoPositionDTO"}}},"title":"PackPositionDTO"}]},"PackageDTO":{"title":"PackageDTO","allOf":[{"$ref":"#/definitions/VodDTO"},{"type":"object","required":["advisory","csa","definition","domain","id","playEndDate","playStartDate","type","videos"],"properties":{"advisory":{"type":"string","description":"advisory about the nature of the content (can be completed by csa code)","enum":["ALLPUBLIC","CHARM"]},"csa":{"type":"integer","format":"int32","description":"french csa code associated to the minimum age recommended to watch the content : 1 (no age limit), 2 (10 years) , 3 (12 years), 4 (16 years), 5 (18 years)"},"definition":{"type":"string","description":"Definition","enum":["NOT_APPLICABLE","SD","HD","UHD"]},"domain":{"type":"string","description":"TV sub domain : VOD in this version! for the future : CATCHUP, NPVR ... ","enum":["VOD","NPVR"]},"id":{"type":"string","description":"article id used in the given domain for this content (assetId)"},"playEndDate":{"type":"integer","format":"int64","description":"the user can play this content until this timestamp (number of milliseconds since January 1, 1970, 00:00:00 GMT)"},"playStartDate":{"type":"integer","format":"int64","description":"the user can play this content from this timestamp (number of milliseconds since January 1, 1970, 00:00:00 GMT)"},"type":{"type":"string","description":"warning : each article type can have an associated detailed model used in this api","enum":["VIDEO","SEASON","PACKAGE","RECORD"]},"videos":{"type":"array","description":"list of ordered videos","items":{"$ref":"#/definitions/VideoDTO"}}},"title":"PackageDTO"}]},"SeasonDTO":{"title":"SeasonDTO","allOf":[{"$ref":"#/definitions/VodDTO"},{"type":"object","required":["advisory","csa","definition","domain","episodes","id","playEndDate","playStartDate","type"],"properties":{"advisory":{"type":"string","description":"advisory about the nature of the content (can be completed by csa code)","enum":["ALLPUBLIC","CHARM"]},"csa":{"type":"integer","format":"int32","description":"french csa code associated to the minimum age recommended to watch the content : 1 (no age limit), 2 (10 years) , 3 (12 years), 4 (16 years), 5 (18 years)"},"definition":{"type":"string","description":"Definition","enum":["NOT_APPLICABLE","SD","HD","UHD"]},"domain":{"type":"string","description":"TV sub domain : VOD in this version! for the future : CATCHUP, NPVR ... ","enum":["VOD","NPVR"]},"episodes":{"type":"array","description":"list of ordered episodes (in addition please provide episode number in each episode object)","items":{"$ref":"#/definitions/VideoDTO"}},"id":{"type":"string","description":"article id used in the given domain for this content (assetId)"},"nbEpisodes":{"type":"integer","format":"int32","description":"number of episodes"},"playEndDate":{"type":"integer","format":"int64","description":"the user can play this content until this timestamp (number of milliseconds since January 1, 1970, 00:00:00 GMT)"},"playStartDate":{"type":"integer","format":"int64","description":"the user can play this content from this timestamp (number of milliseconds since January 1, 1970, 00:00:00 GMT)"},"type":{"type":"string","description":"warning : each article type can have an associated detailed model used in this api","enum":["VIDEO","SEASON","PACKAGE","RECORD"]}},"title":"SeasonDTO"}]},"SeasonDetailedPositionDTO":{"title":"SeasonDetailedPositionDTO","allOf":[{"$ref":"#/definitions/ArticlePositionDTO"},{"type":"object","required":["advisory","csa","domain","episodes","id","type"],"properties":{"advisory":{"type":"string","description":"advisory about the nature of the content (can be completed by csa code)","enum":["ALLPUBLIC","CHARM"]},"csa":{"type":"integer","format":"int32","description":"french csa code associated to the minimum age recommended to watch the content : 1 (no age limit), 2 (10 years) , 3 (12 years), 4 (16 years), 5 (18 years)"},"definition":{"type":"string","description":"Definition","enum":["NOT_APPLICABLE","SD","HD","UHD"]},"domain":{"type":"string","description":"TV sub domain : VOD in this version! for the future : CATCHUP, NPVR ... ","enum":["VOD","NPVR"]},"episodes":{"type":"array","description":"episodes","items":{"$ref":"#/definitions/VideoDetailedPositionDTO"}},"id":{"type":"string","description":"article id used in the given domain for this content (assetId for a video)"},"nbEpisodes":{"type":"integer","format":"int32","description":"number of episodes"},"playEndDate":{"type":"integer","format":"int64","description":"the user can play this content until this timestamp (number of milliseconds since January 1, 1970, 00:00:00 GMT)"},"playStartDate":{"type":"integer","format":"int64","description":"the user can play this content from this timestamp (number of milliseconds since January 1, 1970, 00:00:00 GMT)"},"type":{"type":"string","description":"warning : each article type can have an associated detailed model used in this api","enum":["VIDEO","SEASON","PACKAGE","RECORD"]}},"title":"SeasonDetailedPositionDTO"}]},"SeasonPositionDTO":{"title":"SeasonPositionDTO","allOf":[{"$ref":"#/definitions/ArticlePositionDTO"},{"type":"object","required":["domain","episodes","id","type"],"properties":{"domain":{"type":"string","description":"TV sub domain : VOD in this version! for the future : CATCHUP, NPVR ... ","enum":["VOD","NPVR"]},"episodes":{"type":"array","description":"episodes","items":{"$ref":"#/definitions/VideoPositionDTO"}},"id":{"type":"string","description":"article id used in the given domain for this content (assetId for a video)"},"type":{"type":"string","description":"warning : each article type can have an associated detailed model used in this api","enum":["VIDEO","SEASON","PACKAGE","RECORD"]}},"title":"SeasonPositionDTO"}]},"TimeCodeDTO":{"type":"object","required":["domain","timecode"],"properties":{"domain":{"type":"string","description":"TV sub domain : VOD in this version! for the future : CATCHUP, NPVR ... ","enum":["VOD","NPVR"]},"timecode":{"type":"integer","format":"int64","description":" playing position to be used to resume the video in millisecond"}},"title":"TimeCodeDTO"},"VideoDTO":{"title":"VideoDTO","allOf":[{"$ref":"#/definitions/VodDTO"},{"type":"object","required":["advisory","csa","definition","domain","duration","id","playEndDate","playId","playStartDate","type"],"properties":{"advisory":{"type":"string","description":"advisory about the nature of the content (can be completed by csa code)","enum":["ALLPUBLIC","CHARM"]},"csa":{"type":"integer","format":"int32","description":"french csa code associated to the minimum age recommended to watch the content : 1 (no age limit), 2 (10 years) , 3 (12 years), 4 (16 years), 5 (18 years)"},"definition":{"type":"string","description":"Definition","enum":["NOT_APPLICABLE","SD","HD","UHD"]},"domain":{"type":"string","description":"TV sub domain : VOD in this version! for the future : CATCHUP, NPVR ... ","enum":["VOD","NPVR"]},"duration":{"type":"integer","format":"int64","description":"duration in ms "},"episodeNumber":{"type":"integer","format":"int32","description":"episode number in the season (MUST be provided for a season article)"},"id":{"type":"string","description":"article id used in the given domain for this content (assetId)"},"playEndDate":{"type":"integer","format":"int64","description":"the user can play this content until this timestamp (number of milliseconds since January 1, 1970, 00:00:00 GMT)"},"playId":{"type":"string","description":"video play id (used to play the content)"},"playStartDate":{"type":"integer","format":"int64","description":"the user can play this content from this timestamp (number of milliseconds since January 1, 1970, 00:00:00 GMT)"},"seasonInfo":{"description":"season informations ","$ref":"#/definitions/SeasonInfoDTO"},"timecode":{"type":"integer","format":"int64","description":"timecode in ms, will be 0 if not provided"},"type":{"type":"string","description":"warning : each article type can have an associated detailed model used in this api","enum":["VIDEO","SEASON","PACKAGE","RECORD"]}},"title":"VideoDTO"}]},"VideoDetailedPositionDTO":{"title":"VideoDetailedPositionDTO","allOf":[{"$ref":"#/definitions/ArticlePositionDTO"},{"type":"object","required":["advisory","csa","domain","duration","id","playId","type","watchingState"],"properties":{"advisory":{"type":"string","description":"advisory about the nature of the content (can be completed by csa code)","enum":["ALLPUBLIC","CHARM"]},"csa":{"type":"integer","format":"int32","description":"french csa code associated to the minimum age recommended to watch the content : 1 (no age limit), 2 (10 years) , 3 (12 years), 4 (16 years), 5 (18 years)"},"definition":{"type":"string","description":"Definition","enum":["NOT_APPLICABLE","SD","HD","UHD"]},"domain":{"type":"string","description":"TV sub domain : VOD in this version! for the future : CATCHUP, NPVR ... ","enum":["VOD","NPVR"]},"duration":{"type":"integer","format":"int64","description":"video duration in ms"},"episodeNumber":{"type":"integer","format":"int32","description":"episode number in the season if this video is an episode"},"id":{"type":"string","description":"article id used in the given domain for this content (assetId for a video)"},"playEndDate":{"type":"integer","format":"int64","description":"the user can play this content until this timestamp (number of milliseconds since January 1, 1970, 00:00:00 GMT)"},"playId":{"type":"string","description":"video play id"},"playStartDate":{"type":"integer","format":"int64","description":"the user can play this content from this timestamp (number of milliseconds since January 1, 1970, 00:00:00 GMT)"},"resumeTimecode":{"type":"integer","format":"int64","description":"position (in ms) to resume the video play"},"timecode":{"type":"integer","format":"int64","description":"last position (in ms) sent by a device"},"timecodeUpdateDate":{"type":"integer","format":"int64","description":"timecode update timestamp in ms (0 if never updated)"},"type":{"type":"string","description":"warning : each article type can have an associated detailed model used in this api","enum":["VIDEO","SEASON","PACKAGE","RECORD"]},"watchingState":{"type":"string","description":"watching state","enum":["NOT_STARTED","ONGOING","COMPLETE"]}},"title":"VideoDetailedPositionDTO"}]},"VideoPositionDTO":{"title":"VideoPositionDTO","allOf":[{"$ref":"#/definitions/ArticlePositionDTO"},{"type":"object","required":["domain","id","type","watchingState"],"properties":{"domain":{"type":"string","description":"TV sub domain : VOD in this version! for the future : CATCHUP, NPVR ... ","enum":["VOD","NPVR"]},"id":{"type":"string","description":"article id used in the given domain for this content (assetId for a video)"},"resumeTimecode":{"type":"integer","format":"int64","description":"position (in ms) to resume the video play"},"timecode":{"type":"integer","format":"int64","description":"last position (in ms) sent by a device"},"timecodeUpdateDate":{"type":"integer","format":"int64","description":"timecode update timestamp in ms (0 if never updated)"},"type":{"type":"string","description":"warning : each article type can have an associated detailed model used in this api","enum":["VIDEO","SEASON","PACKAGE","RECORD"]},"watchingState":{"type":"string","description":"watching state","enum":["NOT_STARTED","ONGOING","COMPLETE"]}},"title":"VideoPositionDTO"}]},"VodDTO":{"title":"VodDTO","allOf":[{"$ref":"#/definitions/ArticleDTO"},{"type":"object","required":["advisory","csa","definition","domain","id","playEndDate","playStartDate","type"],"discriminator":"type","properties":{"advisory":{"type":"string","description":"advisory about the nature of the content (can be completed by csa code)","enum":["ALLPUBLIC","CHARM"]},"csa":{"type":"integer","format":"int32","description":"french csa code associated to the minimum age recommended to watch the content : 1 (no age limit), 2 (10 years) , 3 (12 years), 4 (16 years), 5 (18 years)"},"definition":{"type":"string","description":"Definition","enum":["NOT_APPLICABLE","SD","HD","UHD"]},"domain":{"type":"string","description":"TV sub domain : VOD in this version! for the future : CATCHUP, NPVR ... ","enum":["VOD","NPVR"]},"id":{"type":"string","description":"article id used in the given domain for this content (assetId)"},"playEndDate":{"type":"integer","format":"int64","description":"the user can play this content until this timestamp (number of milliseconds since January 1, 1970, 00:00:00 GMT)"},"playStartDate":{"type":"integer","format":"int64","description":"the user can play this content from this timestamp (number of milliseconds since January 1, 1970, 00:00:00 GMT)"},"type":{"type":"string","description":"warning : each article type can have an associated detailed model used in this api","enum":["VIDEO","SEASON","PACKAGE","RECORD"]}},"title":"VodDTO"}]}}}